<div class="task-viewer">
  <div class="col-sm-12">
    <div class="task-viewer-toolbar clearfix">
      <div class="btn-group dropdown active-task-selector col-sm-1" uib-dropdown>
        <button class="btn task-status {{activeStatusData().class}} dropdown-toggle" uib-dropdown-toggle>
          <label>{{task.definition.abbreviation}}</label>
          <span class="caret"></span>
        </button><!--/dropdown-button-->
        <project-tasks-list
          uib-dropdown-menu
          class="dropdown-menu"
          in-menu="true"
          unit="unit"
          project="project"
          on-select="setSelectedTask"></project-tasks-list>
      </div><!--/active-task-selector-->

      <div class="task-header-info col-sm-10">
        <div class="col-sm-8 task-status-summary">
          <div class="task-header-grade-icon">
            <grade-icon grade="task.definition.target_grade"></grade-icon>
          </div>
          <h3>{{task.definition.name}}</h3>
          <p class="help-block">{{activeStatusData().helpText}}</p>
          <div class="graded-task-mark text-danger" ng-if="taskIsGraded">
            Your tutor has marked you on this task to a <grade-icon grade="task.grade"></grade-icon> standard.
          </div>
        </div>
        <div class="col-sm-4 date-info">
          <div class="overdue label label-{{daysOverdue(task) > 5 ? 'danger' : 'warning'}}" ng-hide="daysOverdue(task) === false" tooltip="Tasks are overdue until they are discussed with your tutor." tooltip-placement="right">
            <i class="fa fa-exclamation-triangle"></i>
            Past Target By <br/> {{daysOverdue(task)}} day{{daysOverdue(task) > 1 ? 's' : ''}}
          </div>
          <p class="due-date" tooltip="You should aim to complete the task by this date" tooltip-placement="right">
            <label>Target:</label> {{task.definition.target_date | date:'EEE MMM d'}}
          </p>
          <p class="due-date" ng-show="task.definition.due_date" tooltip="The task must be completed by this date" tooltip-placement="right">
            <label>Deadline:</label> {{task.definition.due_date | date:'EEE MMM d'}}
          </p>
        </div>
      </div><!--/task-header-info-->

      <div tooltip-placement="left" tooltip="{{activeStatusData().label}}" tooltip-append-to-body="true" class="btn-group dropdown active-task-status-selector col-sm-1 pull-right" uib-dropdown>
        <button type="button" class="btn task-status {{statusClass(task.status)}} dropdown-toggle" uib-dropdown-toggle>
          <i class="{{activeStatusData().icon}} fa-2x"></i>
          <span class="caret"></span>
        </button>

        <task-status-selector
          uib-dropdown-menu
          task="task"
          assessing-unit-role="assessingUnitRole"
          in-menu="true"
          trigger-transition="triggerTransition"></task-status-selector>

      </div><!--/active-task-status-selector-->
    </div><!--/task-toolbar-->
  </div>
  <div class="col-sm-2 col-lg-1 task-viewer-tabs">
    <tabs data="tabs" template-url="tasks/task-viewer/tabs.tpl.html"></tabs>
  </div>
  <div class="col-sm-10 col-lg-11" class="class-viewer-tab-contents">
    <div class="panel panel-primary">
      <div class="panel-heading row-fluid">
        <h3 class="panel-title">
          {{currentState.title}}
        </h3>
        {{currentState.subtitle}}
      </div>
      <div class="task-viewer-tab-panel" ui-view="task">
      </div><!--/panel-body-area-->
    </div><!--/tab-contents-panel-->
  </div>
</div>
